appname = cvevulner
httpport = 80
runmode = dev
autorender = false
copyrequestbody = true
EnableDocs = true
sqlconn =
# Login key agreed by both parties
key = "${AES_KEY||djS*@+8K9{J!ymk6}"
initdb = 1
# Login key
loginkey = "{${LOGIN_KEY||djS*@+8K9{-!yo%64}"
# Token validity period, unit: day
token_expir_time=3
# Analysis instructions
analysisCmd = "/analysis"
endCmd = "/done"
rejectCmd = "/reject"
approveCmd = "/approve"
closeCmd = "/close"
errorCmd = "/error"
autoPrCmd = "/find-patch"
feedBackCmd = "/report-patch"
getCveCmd = "/get-cve"
verifyCmd = "/verify-patch"
labelFixed = "CVE/FIXED"
labelUnFix = "CVE/UNFIXED"
labeUnaffected = "CVE/UNAFFECTED"
totallabel = "CVE/FIXED,CVE/UNFIXED,CVE/UNAFFECTED"
labeAbiChanged = "abi-changed"
fileDir = "download"
saFileDir = "download/sa"
gaussFileDir = "download/gauss"
# release package download url http://119.3.219.20:88/mkb/obs_update_info/openEuler-20.03-LTS.csv
rpUrl = "https://gitee.com/unsunghero/obs_pkg_rpms/raw/master/latest_rpm/openEuler-20.03-LTS.csv"
#communityName = "src-openeuler:1,opengauss:2,mindspore:3"
communityName = "cve-test:1,cve-gauss:2,cve-mindspore:3,open-loo-keng:4"

[timedtask]
packageDir = "cve-timed-task/"
GwController = "2 0 * * 0-6"
RunTableTask = "@every 40m"
ToExcelController = "2 0 * * 0-6"
RunMappingTask = "30 7 * * 0-6"
RunDelFileTask = "30 9 * * 0-6"
RunIssueRecordTask = "30 7 * * 0-6"
RunWhitelistTask = "@every 2h"
RunPackageCommitterTask = "@every 1h"
SupplementCveTask = "@every 27m"
LongSupplementCveTask = "30 1 * * 0-6"
ParseOpenGaussYamlTask = "30 2 * * 0-6"
ParseMindsporeYamlTask = "30 3 * * 0-6"
ParseOpenlookengYamlTask = "30 4 * * 0-6"


[mysql]
dbhost = "${DB_URI||127.0.0.1}"
dbport = 3310
dbuser = "${DB_USER||cve}"
dbpwd = "${DB_PWD||***}"
dbname = oneline_cvevulner
dbprefix = cve_
maxidle = 30
maxconn = 3000


[log]
log_level = 7
log_dir = ./logs
log_path = logs/cve.log
maxlines=25000
maxsize=204800

[crontab]
ymalflag = 2
getymal = 0 0 15 * * *
eulerymalflag = 2
eulergetymal = 0 53 17 * * *
cveflag = 2
getcve = 0 40 15 * * *
oricveflag = 2
oricvecheck = 0 16 19 * * *
getissueflag = 2
getissue = 0 57 17 * * *
issueflag = 2
createissue = 0 55 10 * * *
emergissueflag = 2
emergcreateissue = 0 */3 * * * *
test = 0/10 * * * * *
gittokenflag = 2
issueoath = * * */20 * * *
genexcelflag = 2
genexcel = 0 0/10 * * * *
days = -30
prcnum = 50
printlogflag = 2
printlog = 0 0/20 * * * *
unlockflag = 2
unlock = 0 30 19 * * *
hookflag = 2
prochook = 0 34 17 * * *
createhookflag = 2
createhook = 0 29 11 * * *
exceptflag = 2
exceptcve = 0 3 19 * * *
gensaflag = 2
gensa = 0 3 19 * * *
issuestatisticflag = 2
issuestatistic = 0 19 17 * * *
cvecredflag = 2
cvecredit = 0 53 14 * * *
urgenttaskflag = 2
urgenttask = 0 51 9-20 * * *
seclinkflag = 2
seclinktask = 0 55 17 * * *
checkissuedelflag = 2
checkissuedel = 0 22 16 * * *
# Statistics of issues created in different communities
issuecommunityflag = 2
issuecommunity = 0 50 15 * * *
# Check whether the issue label is reasonable
issuelabelcheckflag = 2
issuelabelcheck = 0 */30 * * * *
# Get v8 token task
getv8tokenflag = 2
getv8token = 0/10 * * * * *
# Set issue processing date
setissueprocdateflag = 2
setissueprocdate = */10 * * * * *

releaseUnaffectedCveflag = 2
releaseUnaffectedCve = 0 0 11 * * 1

[gitee]
#owner = cve-test
#owner = src-openeuler
#path = test
#email = 1499273991@qq.com
#redirect_uri = http://119.8.126.102:80/v1/issue/oauth/callback
#  -------jianjun gitee 配置 --------
#owner = src-openeuler
owner = cve-test
path = jasper
email = 7844966+zhangjianjun_code@user.noreply.gitee.com
redirect_uri = http://159.138.2.2:80/v1/issue/oauth/callback
owner_openuler= openeuler


scope = user_info projects pull_requests issues notes keys hook groups gists enterprises emails
# Obtain first from the system environment variables, use the default value if it fails ****
client_id = "${GITEE_CLIENT_ID||****}"
client_secret = "${GITEE_CLIENT_SECRET||****}"
password = "${GITEE_PASSWORD||****}"

# git token
git_token = "${GITEE_TOKEN||xxx}"

[hook]
hookpwd = "${HOOK_PWD||***}"
hookurl = http://159.138.2.2:80/v1/issue/hook/event
hook_timeout = 600
# 1 create, 2 Not create
create_hook = 2
# Whether to delete all webhooks: 1: do not delete; 2: delete
delete_hook = 2


[yaml]
apiurl = https://api.openeuler.org/pkgmanage
#eulerurl = http://159.138.0.250:8081/v1/versions
eulerurl = http://omapi.osinfra.cn/v1/versions

[cve]
cveref = https://nvd.nist.gov/vuln/detail/
openeulernum = 3000
# Import cve as data after 2018
cve_number = 1990
# Manual data import restrictions
cve_number_m = 1990
# Tool import data restriction
cve_number_t = 1990
# Create an issue's repo whitelist;1: open; 2: close
issue_whitelist = 2
# List of affected branches： openEuler-20.03-LTS-SP1,openEuler-20.03-LTS-SP2,openEuler-20.03-LTS-SP3
affected_branchs = "openEuler-20.03-LTS-SP1,openEuler-20.03-LTS-SP2,openEuler-20.03-LTS-SP3,openEuler-22.03-LTS"
abandoned_branchs = "openEuler-20.03-LTS,openEuler-21.03,openEuler-21.09,openEuler-20.09"
# Close the highest privilege of issue
close_issue_privilege = 2
# abnormal cve status ,Use "," to separate multiple states
abn_cve_status =3
# SA number, The remaining amount
sa_re_amount = 4000
# The number of days the issue counts the mailing list
cve_statistics_date = 20
# before 3 Month
before_month = -3
# Trusted data query(0-3)
credibility_level = 3
# Date before adding the security bulletin link task
sec_link_date = -100
# Branch configuration of cve that needs to submit an issue
submit_issue_branch = "openEuler-20.03-LTS,openEuler-20.03-LTS-SP1,openEuler-20.03-LTS-SP2,openEuler-20.03-LTS-SP3,openEuler-20.03-LTS-Next,openEuler-21.03,master"
# De-duplication
de_duplication_date = -300
# table num
yaml_config_table = "cve_open_euler_repo_origin:1,cve_open_guss_yaml:2,cve_mind_spore_yaml:3,cve_open_lookeng_yaml:4"
bot_cu_account = "openeuler-ci-bot,opengauss-bot,mindspore-ci-bot,mindspore_ci,i-robot,CVE,I-am-a-robot"
out_of_sync_branch = "openEuler1.0-base,openEuler1.0"

user = "${UPLOAD_USERNAME||xxx}"
pwd = "${UPLOAD_PASSWORD||xxx}"

[reflink]
comment_cmd = https://gitee.com/openeuler/cve-manager/blob/master/cve-vulner-manager/doc/md/manual.md
gauss_comment_cmd = https://gitee.com/opengauss/security/blob/master/cve/manual.md
spore_comment_cmd = https://gitee.com/mindspore/community/blob/master/security/cve_issue_template.md
looKeng_comment_cmd = https://gitee.com/openlookeng/community/blob/master/security/cve/doc/md/manual.md
openeuler_web = https://www.openeuler.org
#openeuler_web = http://119.13.93.224:9090
get_cve_link = http://127.0.0.1:8080/pulls/cve/info

[excel]
forcerewrite = false
snprefix = op-2020-10-
snsuffix = 1002
# Version package excel download address
# example: openEuler-20.03-LTS@http://119.3.219.20:88/mkb/obs_update_info/openEuler-20.03-LTS.csv;
# openEuler-20.03-LTS-SP1@http://119.3.219.20:88/mkb/obs_update_info/openEuler-20.03-LTS-SP1.csv
# public sa format: openEuler-20.03-LTS@https;openEuler-20.03-LTS-SP1@https
v_pack_20_03_url = "openEuler-20.03-LTS-SP1@https;openEuler-20.03-LTS-SP3@https;openEuler-22.03-LTS@https"
release_date_of_version = "openEuler-22.03-LTS-SP2:2023-06-30;"
# Time difference in different time zones
sa_timestamp_zone = 28800
unaffect_year = 2018

[xml]
updateinfo_path = updateinfo.xml
cvrf_upload_path = http://159.138.2.2:9090/
use_openeuler_num = openEuler-SA-2021-1001

[email]
email_name = "${EMAIL_NAME||***}"
email_pwd = "${EMAIL_PWD||***}"
email_host = mailman-exim4-service.mail.svc.cluster.local
email_port = 25

[opengauss]
#gauss_owner = opengauss
gauss_owner = cve-gauss
# git token
git_gauss_token = "${GITEE_GAUSS_TOKEN||xxx}"
gauss_version = 2.0.0,1.1.0,1.0.1,1.0.0
gauss_issue_path = security
gauss_branch_path = openGauss-server
sa_init_value = 1001
pr_repo = "openGauss-server,openGauss-connector-jdbc,openGauss-connector-odbc,openGauss-OM,openGauss-third_party"
nvd_relink = https://nvd.nist.gov/vuln/detail/


[mindspore]
#mindspore_owner = mindspore
mindspore_owner = cve-mindspore
# git token
git_mindspore_token = "${GITEE_MINDSPORE_TOKEN||xxx}"
mindspore_version = "master,r1.10,r1.7,r1.8,r1.9"

[obs]
access_key_id = "${OBS_KEY_ID||xxx}"
secret_access_key = "${OBS_SECRET_KEY||xxx}"
endpoint = obs.ap-southeast-1.myhuaweicloud.com
bucket = openeuler-cve-cvrf
upload_cvrf_dir = "dev-cve-manager-cvrf/"
download_cvrf_dir = "dev-cvrf/"
upload_updateinfo_dir = "dev-cve-manager-updateinfo/"

[cveagency]
#url = "http://cve-manager-agent.cve-manager-agent.svc.cluster.local/v1/cve/track"
url = "http://127.0.0.1:8090/v1/cve/track"

[openlookeng]
#openlookeng_owner = openlookeng
openlookeng_owner = open-loo-keng
# git token
git_openlookeng_token = "${GITEE_OPENLOOKENG_TOKEN||xxx}"
openlookeng_version = "master"

[majun]
token = "${GITEE_MAJUN_TOKEN||xxx}"