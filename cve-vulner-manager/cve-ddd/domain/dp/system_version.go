package dp

import (
	"errors"
)

const (
	openeuler2003SP1 = "openEuler-20.03-LTS-SP1"
	openeuler2003SP3 = "openEuler-20.03-LTS-SP3"
	openeuler2203    = "openEuler-22.03-LTS"
	openeuler2203SP1 = "openEuler-22.03-LTS-SP1"
	openeuler2203sp2 = "openEuler-22.03-LTS-SP2"
)

var MaintainVersion = map[string]bool{
	openeuler2003SP1: true,
	openeuler2003SP3: true,
	openeuler2203:    true,
	openeuler2203SP1: true,
	openeuler2203sp2: true,
}

type systemVersion string

type SystemVersion interface {
	String() string
}

func NewSystemVersion(s string) (SystemVersion, error) {
	// MaintainVersion is not used for validation because
	// there is an error reading old data from the database when maintainVersion changes
	if s == "" {
		return nil, errors.New("invalid system version")
	}

	return systemVersion(s), nil
}

func (s systemVersion) String() string {
	return string(s)
}
